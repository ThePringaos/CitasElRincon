{"ast":null,"code":"var _jsxFileName = \"/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js\";\nimport React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\nimport ProfessionalService from '../services/professional.service';\nimport DepartmentService from '../services/department.service';\nimport TutorService from '../services/tutor.service';\nimport RoleService from '../services/role.service';\nimport ImageService from '../services/image.service';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\n\nclass profileComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.formatImage = value => {\n      console.log(value.target.files[0]);\n    };\n\n    this.state = {\n      departments: [],\n      roles: [],\n      tutors: [],\n      id: null,\n      name: null,\n      departmentId: null,\n      roleId: null,\n      email: sessionStorage.getItem(\"userEmail\"),\n      tutorId: null,\n      comment: \"\",\n      image: null,\n      imageId: null\n    };\n  }\n\n  componentDidMount() {\n    //Professional info\n    this.queryProfessionals(); //Dropdowns\n\n    this.queryDepartments();\n    this.queryRoles();\n    this.queryTutors();\n  }\n\n  queryProfessionals() {\n    ProfessionalService.getWithEmail({\n      email: this.state.email\n    }).then(res => {\n      if (res.data.success) {\n        const {\n          id,\n          name,\n          departmentId,\n          roleId,\n          tutorId,\n          comment,\n          imageId\n        } = res.data.data[0];\n        this.setState({\n          id: id,\n          name: name,\n          departmentId: departmentId,\n          roleId: roleId,\n          tutorId: tutorId,\n          comment: comment,\n          imageId: imageId\n        });\n        console.log(this.state);\n        console.log(\"IMAGE ID \" + imageId); //AÑADIR CONTROLADOR Y RUTAS PARA IMAGEN\n\n        if (imageId != null) {\n          ImageService.get(imageId).then(res => {\n            this.setState({\n              image: res.data.data[0]\n            }); //console.log(\"MI IMAGEN \"+JSON.stringify(this.state.image));\n\n            this.cargarImagen(this.state.image);\n          }).catch(err => {\n            console.log('ERROR server ' + err);\n          });\n        } else {\n          console.log(';)');\n        } //this.setState(id,name,departmentId,roleId,tutorId,comment,imageId);\n\n      } else {\n        console.log('Error quering professional EDIT');\n      }\n    }).catch(err => {\n      console.log('ERROR server' + err);\n    });\n  }\n\n  queryDepartments() {\n    DepartmentService.getAll().then(res => {\n      if (res.data.success) {\n        const data = res.data.data;\n        this.setState({\n          departments: data\n        });\n      } else {\n        console.log('Error quering departments EDIT');\n      }\n    }).catch(err => {\n      console.log('ERROR server' + err);\n    });\n  }\n\n  queryRoles() {\n    RoleService.getAll().then(res => {\n      if (res.data.success) {\n        const data = res.data.data;\n        this.setState({\n          roles: data\n        });\n      } else {\n        console.log('Error quering roles EDIT');\n      }\n    }).catch(err => {\n      console.log('ERROR server' + err);\n    });\n  }\n\n  queryTutors() {\n    TutorService.getAll().then(res => {\n      if (res.data.success) {\n        const data = res.data.data;\n        this.setState({\n          tutors: data\n        });\n      } else {\n        console.log('Error quering tutors EDIT');\n      }\n    }).catch(err => {\n      console.log('ERROR server' + err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: value => this.setState({\n        name: value.target.value\n      }),\n      class: \"form-control\",\n      name: \"nombre\",\n      placeholder: \"Nombre\",\n      autofocus: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.departmentId,\n      onChange: value => this.setState({\n        departmentId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 49\n      }\n    }, \"Departamento\"), this.loadDepartments()))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.roleId,\n      onChange: value => this.setState({\n        roleId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 49\n      }\n    }, \"Rol\"), this.loadRoles()))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      class: \"form-control\",\n      value: this.state.tutorId,\n      onChange: value => this.setState({\n        tutorId: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      selected: true,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 49\n      }\n    }, \"Tutor\\xEDa\"), this.loadTutors())))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      class: \"form-control\",\n      value: this.state.comment,\n      onChange: value => this.setState({\n        comment: value.target.value\n      }),\n      placeholder: \"Introduzca si lo desea alg\\xFAn comentario: Me gusta J\",\n      rows: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-success\",\n      onClick: () => this.updateProfessional(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 37\n      }\n    }, \"Actualizar\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      class: \"md-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"file-field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require(\"../images/profile-picture.jpg\"),\n      ref: profilePicture => this.myProfilePicture = profilePicture,\n      id: \"blah\",\n      class: \"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\",\n      alt: \"avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: \"10px\"\n      },\n      class: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn btn-mdb-color btn-rounded float-left custom-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        width: \"100%\"\n      },\n      ref: myElement => this.myFileElement = myElement,\n      type: \"file\",\n      id: \"imgInput\",\n      className: \"custom-file-input btn btn-primary\",\n      onChange: value => {\n        this.readURL(value.target);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 53\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      class: \"custom-file-label\",\n      for: \"customFile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 53\n      }\n    }, \"Perfil\")))))))))));\n  }\n\n  loadDepartments() {\n    return this.state.departments.map(data => {\n      if (data) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: data.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 21\n          }\n        }, data.name);\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 24\n          }\n        });\n      }\n    });\n  }\n\n  loadRoles() {\n    return this.state.roles.map(data => {\n      if (data) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: data.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 21\n          }\n        }, data.name);\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 24\n          }\n        });\n      }\n    });\n  }\n\n  loadTutors() {\n    return this.state.tutors.map(data => {\n      if (data) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          value: data.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 21\n          }\n        }, data.name);\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 24\n          }\n        });\n      }\n    });\n  }\n\n  readURL(input) {\n    if (input.files && input.files[0]) {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        console.log(reader.result);\n      };\n\n      const myValue = input.files[0];\n\n      if (myValue.type.includes(\"image\")) {\n        reader.onload = event => $('#blah').attr('src', event.target.result);\n\n        console.log(myValue);\n        reader.readAsDataURL(myValue); // convert to base64 string\n\n        console.log(this.result);\n        this.state.image = {\n          name: myValue.name,\n          type: myValue.type,\n          data: myValue\n        };\n      } else {\n        Swal.fire({\n          position: 'top',\n          icon: 'error',\n          title: 'Sólo archivos de tipo imagen!',\n          showConfirmButton: false,\n          timer: 2000\n        });\n      }\n    }\n  }\n\n  cargarImagen(imagenDeBBDD) {\n    console.log(imagenDeBBDD);\n    var reader = new FileReader();\n\n    if (imagenDeBBDD.type.includes(\"image\")) {\n      reader.onload = event => $('#blah').attr('src', event.target.result);\n\n      const blob = new Blob(imagenDeBBDD.data.data, {\n        type: imagenDeBBDD.data.type\n      }); //console.log(imagenDeBBDD.data);\n\n      const imageUrl = URL.createObjectURL(blob);\n      reader.readAsDataURL(blob); // convert to base64 string\n    } else {\n      Swal.fire({\n        position: 'top',\n        icon: 'error',\n        title: 'Sólo archivos de tipo imagen!',\n        showConfirmButton: false,\n        timer: 2000\n      });\n    }\n  }\n\n  validateFields() {\n    let emptyFields = \"\";\n    let count = 0;\n    const nombre = this.state.name;\n\n    if (nombre.replace(/\\s/g, \"\").length == 0) {\n      emptyFields += \" Nombre \";\n      count++;\n    }\n\n    if (this.state.departmentId == null) {\n      emptyFields += \" Departamento \";\n      count++;\n    }\n\n    if (this.state.roleId == null) {\n      emptyFields += \" Rol \";\n      count++;\n    } //If there are errors\n\n\n    if (count > 0) {\n      Swal.fire({\n        position: 'center',\n        icon: 'error',\n        title: (count == 1 ? \"Falta el campo\" : \"Faltan los campos: \") + emptyFields,\n        showConfirmButton: false,\n        timer: 2000\n      });\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  updateProfessional() {\n    if (this.validateFields() == false) {\n      return;\n    } // parametros de datos post\n\n\n    const datapost = {\n      id: this.state.id,\n      name: this.state.name,\n      departmentId: this.state.departmentId,\n      roleId: this.state.roleId,\n      email: this.state.email,\n      tutorId: this.state.tutorId,\n      comment: this.state.comment,\n      image: this.state.image,\n      imageId: this.state.imageId\n    };\n    alert(JSON.stringify(datapost));\n    ProfessionalService.update(datapost).then(res => {\n      if (res.data.success) {\n        //alert(res.data.message);\n        Swal.fire({\n          position: 'top',\n          icon: 'success',\n          title: 'Profesional actualizado correctamente!',\n          showConfirmButton: false,\n          timer: 2000\n        }); //this.props.history.push('/list'); \n      } else {\n        alert(\"Error\");\n      }\n    }).catch(error => {\n      alert(\"Error 34 \" + error);\n    });\n  }\n\n}\n\nexport default profileComponent;","map":{"version":3,"sources":["/Users/trabajo/Desktop/ELRINCON/react-rincon/src/modules/editProfile.js"],"names":["React","ProfessionalService","DepartmentService","TutorService","RoleService","ImageService","Swal","$","profileComponent","Component","constructor","props","formatImage","value","console","log","target","files","state","departments","roles","tutors","id","name","departmentId","roleId","email","sessionStorage","getItem","tutorId","comment","image","imageId","componentDidMount","queryProfessionals","queryDepartments","queryRoles","queryTutors","getWithEmail","then","res","data","success","setState","get","cargarImagen","catch","err","getAll","render","loadDepartments","loadRoles","loadTutors","updateProfessional","require","profilePicture","myProfilePicture","marginTop","width","myElement","myFileElement","readURL","map","input","reader","FileReader","onloadend","result","myValue","type","includes","onload","event","attr","readAsDataURL","fire","position","icon","title","showConfirmButton","timer","imagenDeBBDD","blob","Blob","imageUrl","URL","createObjectURL","validateFields","emptyFields","count","nombre","replace","length","datapost","alert","JSON","stringify","update","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../node_modules/bootstrap/dist/js/bootstrap.bundle.min';\n\nimport ProfessionalService from '../services/professional.service';\nimport DepartmentService from '../services/department.service';\nimport TutorService from '../services/tutor.service';\nimport RoleService from '../services/role.service';\nimport ImageService from '../services/image.service';\nimport Swal from 'sweetalert2';\nimport $ from 'jquery';\n\n\nclass profileComponent extends React.Component {\n\n    formatImage = (value) => {\n        console.log(value.target.files[0]);\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            departments: [],\n            roles: [],\n            tutors: [],\n            id: null,\n            name: null,\n            departmentId: null,\n            roleId: null,\n            email: sessionStorage.getItem(\"userEmail\"),\n            tutorId: null,\n            comment: \"\",\n            image: null,\n            imageId: null\n        };\n    }\n\n    componentDidMount() {\n        //Professional info\n        this.queryProfessionals();\n        //Dropdowns\n        this.queryDepartments();\n        this.queryRoles();\n        this.queryTutors();\n    }\n\n    queryProfessionals() {\n        ProfessionalService.getWithEmail({ email: this.state.email })\n            .then(res => {\n                if (res.data.success) {\n                    const { id, name, departmentId, roleId, tutorId, comment, imageId } = res.data.data[0];\n\n                    this.setState({\n                        id: id,\n                        name: name,\n                        departmentId: departmentId,\n                        roleId: roleId,\n                        tutorId: tutorId,\n                        comment: comment,\n                        imageId: imageId\n                    });\n\n                    console.log(this.state);\n\n                    console.log(\"IMAGE ID \" + imageId);\n                    //AÑADIR CONTROLADOR Y RUTAS PARA IMAGEN\n                    if (imageId != null) {\n                        ImageService.get(imageId).then(res => {\n                            this.setState({ image: res.data.data[0] });\n                            //console.log(\"MI IMAGEN \"+JSON.stringify(this.state.image));\n                            this.cargarImagen(this.state.image);\n\n                        }).catch(err => {\n                            console.log('ERROR server ' + err);\n                        });\n                    } else {\n                        console.log(';)');\n\n                    }\n                    //this.setState(id,name,departmentId,roleId,tutorId,comment,imageId);\n                } else {\n                    console.log('Error quering professional EDIT');\n                }\n            })\n            .catch(err => {\n                console.log('ERROR server' + err);\n            });\n    }\n\n    queryDepartments() {\n        DepartmentService.getAll()\n            .then(res => {\n\n                if (res.data.success) {\n                    const data = res.data.data;\n                    this.setState({ departments: data });\n                } else {\n                    console.log('Error quering departments EDIT');\n                }\n            })\n            .catch(err => {\n                console.log('ERROR server' + err);\n            });\n    }\n\n    queryRoles() {\n        RoleService.getAll()\n            .then(res => {\n\n                if (res.data.success) {\n                    const data = res.data.data;\n                    this.setState({ roles: data });\n                } else {\n                    console.log('Error quering roles EDIT');\n                }\n            })\n            .catch(err => {\n                console.log('ERROR server' + err);\n            });\n    }\n\n    queryTutors() {\n        TutorService.getAll()\n            .then(res => {\n\n                if (res.data.success) {\n                    const data = res.data.data;\n                    this.setState({ tutors: data });\n                } else {\n                    console.log('Error quering tutors EDIT');\n                }\n            })\n            .catch(err => {\n                console.log('ERROR server' + err);\n            });\n    }\n\n    render() {\n        return (\n            <div class=\"container p-4\">\n                <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"></script>\n                <div class=\"row\">\n                    <div class=\"col-lg-9\">\n                        <div class=\"card\">\n                            <div class=\"card-body\">\n                                <div class=\"form-group \">\n                                    <input type=\"text\"\n                                        value={this.state.name}\n                                        onChange={(value) => this.setState({ name: value.target.value })}\n                                        class=\"form-control\" name=\"nombre\" placeholder=\"Nombre\" autofocus\n                                    />\n                                </div>\n\n                                <div class=\"row\">\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"form-group\">\n                                            <select class=\"form-control\"\n                                                value={this.state.departmentId}\n                                                onChange={(value) => this.setState({ departmentId: value.target.value })} >\n                                                <option selected disabled>Departamento</option>\n                                                {this.loadDepartments()}\n\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-lg-2\">\n                                        <div class=\"form-group\">\n                                            <select class=\"form-control\"\n                                                value={this.state.roleId}\n                                                onChange={(value) => this.setState({ roleId: value.target.value })} >\n                                                <option selected disabled >Rol</option>\n                                                {this.loadRoles()}\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-lg-3\">\n                                        <div class=\"form-group\">\n                                            <select class=\"form-control\"\n                                                value={this.state.tutorId}\n                                                onChange={(value) => this.setState({ tutorId: value.target.value })} >\n                                                <option selected disabled >Tutoría</option>\n                                                {this.loadTutors()}\n                                            </select>\n                                        </div>\n                                    </div>\n\n                                </div>\n\n                                <div class=\"form-group\">\n                                    <textarea class=\"form-control\"\n                                        value={this.state.comment}\n                                        onChange={(value) => this.setState({ comment: value.target.value })}\n                                        placeholder=\"Introduzca si lo desea algún comentario: Me gusta J\"\n                                        rows=\"3\"></textarea>\n                                </div>\n\n                                <div class=\"form-group\">\n                                    <button type=\"submit\" class=\"btn btn-success\" onClick={() => this.updateProfessional()}>Actualizar</button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"col-lg-3\">\n                        <div class=\"card\">\n                            <div class=\"card-body text-center\">\n                                <form class=\"md-form\">\n                                    <div class=\"file-field\">\n                                        <div class=\"md-4\" >\n                                            <img src={require(\"../images/profile-picture.jpg\")}\n                                                ref={profilePicture => this.myProfilePicture = profilePicture}\n                                                id=\"blah\"\n                                                class=\"rounded-circle z-depth-1-half avatar-pic img-fluid img-thumbnail\" alt=\"avatar\"\n                                            />\n\n                                            <div style={{ marginTop: \"10px\" }} class=\"d-flex\" >\n                                                <div class=\"btn btn-mdb-color btn-rounded float-left custom-file\">\n                                                    <input style={{ width: \"100%\" }} ref={(myElement) => this.myFileElement = myElement}\n                                                        type=\"file\"\n                                                        id=\"imgInput\"\n                                                        className=\"custom-file-input btn btn-primary\"\n                                                        onChange={(value) => { this.readURL(value.target) }}\n                                                    />\n                                                    <label class=\"custom-file-label\" for=\"customFile\">Perfil</label>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        );\n    }\n\n    loadDepartments() {\n        return this.state.departments.map(data => {\n            if (data) {\n                return (\n                    <option value={data.id}>{data.name}</option>\n                );\n            } else {\n                return <div></div>;\n            }\n        });\n    }\n\n    loadRoles() {\n        return this.state.roles.map(data => {\n            if (data) {\n                return (\n                    <option value={data.id}>{data.name}</option>\n                );\n            } else {\n                return <div></div>;\n            }\n        });\n    }\n\n    loadTutors() {\n        return this.state.tutors.map(data => {\n            if (data) {\n                return (\n                    <option value={data.id}>{data.name}</option>\n                );\n            } else {\n                return <div></div>;\n            }\n        });\n    }\n\n    readURL(input) {\n        if (input.files && input.files[0]) {\n            var reader = new FileReader();\n\n\n            reader.onloadend = function () {\n                console.log( reader.result);\n            }\n\n            const myValue = input.files[0];\n\n            if (myValue.type.includes(\"image\")) {\n                reader.onload = (event) => $('#blah').attr('src', event.target.result);\n                \n                console.log(myValue);\n                reader.readAsDataURL(myValue); // convert to base64 string\n\n                console.log(this.result);\n                this.state.image = {\n                    name: myValue.name,\n                    type: myValue.type,\n                    data: myValue\n                }\n            } else {\n                Swal.fire({\n                    position: 'top',\n                    icon: 'error',\n                    title: 'Sólo archivos de tipo imagen!',\n                    showConfirmButton: false,\n                    timer: 2000\n                })\n            }\n        }\n    }\n\n    cargarImagen(imagenDeBBDD) {\n        console.log(imagenDeBBDD);\n        var reader = new FileReader();\n\n        if (imagenDeBBDD.type.includes(\"image\")) {\n            reader.onload = (event) => $('#blah').attr('src', event.target.result);\n            const blob = new Blob(imagenDeBBDD.data.data,{type:imagenDeBBDD.data.type});\n            //console.log(imagenDeBBDD.data);\n            const imageUrl = URL.createObjectURL(blob);\n            reader.readAsDataURL(blob); // convert to base64 string\n        } else {\n            Swal.fire({\n                position: 'top',\n                icon: 'error',\n                title: 'Sólo archivos de tipo imagen!',\n                showConfirmButton: false,\n                timer: 2000\n            })\n        }\n    }\n\n    validateFields() {\n        let emptyFields = \"\";\n        let count = 0;\n        const nombre = this.state.name;\n\n        if (nombre.replace(/\\s/g, \"\").length == 0) {\n            emptyFields += \" Nombre \";\n            count++;\n        }\n        if (this.state.departmentId == null) {\n            emptyFields += \" Departamento \";\n            count++;\n        }\n        if (this.state.roleId == null) {\n            emptyFields += \" Rol \";\n            count++;\n        }\n\n        //If there are errors\n        if (count > 0) {\n            Swal.fire({\n                position: 'center',\n                icon: 'error',\n                title: (count == 1 ? \"Falta el campo\" : \"Faltan los campos: \") + emptyFields,\n                showConfirmButton: false,\n                timer: 2000\n            })\n            return false;\n        } else {\n            return true;\n        }\n\n    }\n\n    updateProfessional() {\n        if (this.validateFields() == false) {\n            return;\n        }\n\n        // parametros de datos post\n        const datapost = {\n            id: this.state.id,\n            name: this.state.name,\n            departmentId: this.state.departmentId,\n            roleId: this.state.roleId,\n            email: this.state.email,\n            tutorId: this.state.tutorId,\n            comment: this.state.comment,\n            image: this.state.image,\n            imageId: this.state.imageId\n        }\n        alert(JSON.stringify(datapost));\n\n        ProfessionalService.update(datapost)\n            .then(res => {\n                if (res.data.success) {\n                    //alert(res.data.message);\n                    Swal.fire({\n                        position: 'top',\n                        icon: 'success',\n                        title: 'Profesional actualizado correctamente!',\n                        showConfirmButton: false,\n                        timer: 2000\n                    })\n                    //this.props.history.push('/list'); \n                }\n                else {\n                    alert(\"Error\");\n                }\n            }).catch(error => {\n                alert(\"Error 34 \" + error);\n            });\n    }\n}\n\n\n\nexport default profileComponent;"]},"metadata":{},"sourceType":"module"}